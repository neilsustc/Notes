(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{568:function(t,a,s){"use strict";s.r(a);var l=s(26),o=Object(l.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"python"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python"}},[t._v("#")]),t._v(" Python")]),t._v(" "),s("h2",{attrs:{id:"作用域-scope"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用域-scope"}},[t._v("#")]),t._v(" 作用域 (scope)")]),t._v(" "),s("ul",[s("li",[t._v("Python 程序由"),s("mark",[t._v("代码块")]),t._v("组成，包括"),s("strong",[t._v("模块")]),t._v(" (mudule)，"),s("strong",[t._v("类")]),t._v(" (class)，"),s("strong",[t._v("函数")]),t._v(" (def) 等"),s("br"),t._v("\n注意 "),s("strong",[t._v("if")]),t._v("，"),s("strong",[t._v("for")]),t._v(" 等语句不构成代码块")]),t._v(" "),s("li",[t._v("当变量在"),s("strong",[t._v("代码块")]),t._v("中被定义时，作用域为该代码块")])]),t._v(" "),s("h3",{attrs:{id:"变量名解析-legb-法则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#变量名解析-legb-法则"}},[t._v("#")]),t._v(" 变量名解析 LEGB 法则")]),t._v(" "),s("p",[t._v("变量名解析顺序：最近的 scope")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#005CC5"}},[t._v("__name__")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("__file__")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Builtin")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("global_var ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Global")])]),t._v("\n\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("outer")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    enclosing_var ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Enclosing (relative to `inner`)")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("inner")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("        local_var ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("3")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Local")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"Local     ')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("local_var")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"Enclosing ')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("enclosing_var")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"Global    ')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("global_var")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("(")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"Builtin   ')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{__name__")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":^8")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    inner()")])]),t._v("\n\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("if")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("__name__")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("==")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"__main__"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(":")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    outer()")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## ═════ Output ═════")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Local        3")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Enclosing    2")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Global       1")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Builtin   __main__")])])])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING - UnboundLocalError")]),t._v(" "),s("p",[t._v("因为 Python 中局部变量可以和全局变量同名，这种错误经常出现，见如下 "),s("code",[t._v("f3")]),t._v("。"),s("br"),t._v("\n如果代码块中任何位置出现了"),s("strong",[t._v("变量名绑定语句")]),t._v("（比如 "),s("code",[t._v("a = 2")]),t._v("），则该代码块中所有变量名 a 都指向该局部变量，包括出现在变量名绑定之前的语句。")]),t._v(" "),s("p",[t._v("好消息是这种错误可以被静态检查工具发现（比如 Pyright）")]),t._v(" "),s("p",[t._v("注意 "),s("code",[t._v("global_dict['foo'] = 'bar'")]),t._v(" 不是变量名绑定语句，不会导致这种错误（"),s("code",[t._v("global_dict = {'foo': 'bar'}")]),t._v(" 才是）")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("global_var ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")])]),t._v("\n\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("f1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("(global_var)     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## 1")])]),t._v("\n\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("f2")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    global_var ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## We now have a local variable 'global_var'")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("(global_var)     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## 2")])]),t._v("\n\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("def")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("f3")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("():")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("print")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("(global_var)     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## UnboundLocalError: local variable 'global_var'↵")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("    global_var ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("        ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("## referenced before assignment")])])])])]),s("p",[s("a",{attrs:{href:"https://docs.python.org/3/reference/executionmodel.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python 执行模型"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"格式化字符串-string-format"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#格式化字符串-string-format"}},[t._v("#")]),t._v(" 格式化字符串 (string format)")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v('## Basics             ## use "·" to visualize whitespace')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#032F62"}},[t._v('"{} {}"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(".format(")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")  ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "1·2"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{1}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{2}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "1·2"')])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Padding and alignment")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("a ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"test"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":10")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("             ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "test······"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":<10")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "test······"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":>10")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "······test"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":^10")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "···test···"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":_<10")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "test______"')])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("!s")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("              ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## equals to f"{str(a)}"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("a")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("!r:10")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("           ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## f"{repr(a):10}"')])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("## Floats")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("b ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0.5")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":5")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("              ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "··0.5" !!!')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":<5")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("             ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "0.5··"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("!s:5")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "0.5··"')])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":05")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("             ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "000.5"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":.3f")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "0.500"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":.3e")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "5.000e-01"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#D73A49"}},[t._v("f")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("{")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("b")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v(":.2%")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("}")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("            ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v('## "50.00%"')])])])])]),s("p",[s("a",{attrs:{href:"https://pyformat.info/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PyFormat (intuitive examples)"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://strftime.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python strftime reference"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://www.python.org/dev/peps/pep-3101/#format-specifiers",target:"_blank",rel:"noopener noreferrer"}},[t._v("PEP 3101 -- Standard Format Specifiers"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"正则表达式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式"}},[t._v("#")]),t._v(" 正则表达式")]),t._v(" "),s("p",[t._v("正则表达式本身就不多介绍了，见 "),s("a",{attrs:{href:"https://regex101.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("regex 101"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("首先值得一提的就是 Python "),s("mark",[t._v("raw string")]),t._v("，其中的反斜杠 "),s("code",[t._v("\\")]),t._v(" 不表示转义字符，而是 literal "),s("code",[t._v("\\")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\\\")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('d"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("==")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("\\d")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v("  ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("# True")])])])])]),s("h3",{attrs:{id:"字符串替换──re-sub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字符串替换──re-sub"}},[t._v("#")]),t._v(" 字符串替换──"),s("code",[t._v("re.sub")])]),t._v(" "),s("p",[t._v("大部分时候我们仅仅只是想做个（正则）字符串替换"),s("br"),t._v(" "),s("code",[t._v("re.sub(pattern, repl, string, count=0, flags=0)")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("pattern")]),t._v(" 要被换掉的模式")]),t._v(" "),s("li",[s("code",[t._v("repl")]),t._v(" 要换成的模式，可以是字符串（支持 backreference 如 "),s("code",[t._v("\\2")]),t._v("）或者函数")]),t._v(" "),s("li",[s("code",[t._v("string")]),t._v(" 要进行替换的字符串")])]),t._v(" "),s("p",[t._v("（"),s("code",[t._v("count")]),t._v(" 若非 0 则表示最大替换次数，"),s("code",[t._v("flags")]),t._v(" 对应正则表达式的 flags）")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("re.sub(")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("(.")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("*")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),s("span",{staticStyle:{color:"#032F62"}},[t._v(" > ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("(.")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("*")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#22863A"}},[t._v("\\2")]),s("span",{staticStyle:{color:"#032F62"}},[t._v(" < ")]),s("span",{staticStyle:{color:"#22863A"}},[t._v("\\1")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"a > b"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'b < a'")])])])])]),s("h3",{attrs:{id:"字符串匹配和提取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字符串匹配和提取"}},[t._v("#")]),t._v(" 字符串匹配和提取")]),t._v(" "),s("p",[s("code",[t._v("re.match")]),t._v(" 和 "),s("code",[t._v("re.search")]),t._v("，都接受参数 "),s("code",[t._v("(pattern, string, flags=0)")]),t._v("，返回 "),s("code",[t._v("None")]),t._v(" 或者 match 对象")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("m ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(" re.match(")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("r")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("(\\w")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("+")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),s("span",{staticStyle:{color:"#032F62"}},[t._v(" ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("(\\w")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("+")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v(")")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"Isaac Newton, physicist"')]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("0")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'Isaac Newton'       The entire match")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'Isaac'              The first parenthesized subgroup.")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("# 'Newton'             The second parenthesized subgroup.")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("m.group(")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("1")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(", ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v("2")]),s("span",{staticStyle:{color:"#24292E"}},[t._v(")  ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("# ('Isaac', 'Newton')  Multiple arguments give us a tuple.")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("m.groups()     ")]),s("span",{staticStyle:{color:"#6A737D"}},[t._v("# ('Isaac', 'Newton')  All subgroups in a tuple.")])])])])]),s("p",[s("code",[t._v("re.match")]),t._v(" 要求 "),s("code",[t._v("pattern")]),t._v(" 出现在字符串 "),s("code",[t._v("string")]),t._v(" 的开头，"),s("code",[t._v("re.search")]),t._v(" 则允许其出现在字符串的任意位置")]),t._v(" "),s("p",[t._v("如果需要多次使用某个正则表达式，可以用 "),s("code",[t._v("re.compile()")]),t._v(" 来生成一个 pattern 对象，其同样可以使用上面这些函数（甚至更精细的功能）")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.python.org/3/library/re.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Regular expression operations - Python documentation"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=o.exports}}]);